(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3db158d4"],{"05df":function(t,e,r){"use strict";var n=r("14e0"),s=r.n(n);s.a},"14e0":function(t,e,r){},"1cd8":function(t,e,r){"use strict";var n=r("243b"),s=r.n(n);s.a},"243b":function(t,e,r){},7950:function(t,e,r){"use strict";var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"mt-4 d-flex flex-column align-items-start"},[r("img",{attrs:{src:t.user.avatar,width:"250px",height:"250px"}}),r("div",{staticClass:"mt-2 d-flex flex-column align-items-start"},[r("h2",{staticClass:"title"},[t._v(t._s(t.user.name))]),r("p",{staticStyle:{width:"300px","text-align":"left","word-break":"break-all"}},[t._v(t._s(t.user.introduction))]),r("ul",{staticClass:"list-inline list-unstyled"},[r("li",{staticStyle:{"text-align":"left"}},[r("strong",[t._v(t._s(t.user.tweetsCount))]),t._v("Tweets ")]),r("li",{staticStyle:{"text-align":"left"}},[r("strong",[t._v(t._s(t.user.followingCount))]),t._v(" followings (追蹤者) ")]),r("li",{staticStyle:{"text-align":"left"}},[r("strong",[t._v(t._s(t.user.followerCount))]),t._v(" followers (追隨者) ")]),r("li",{staticStyle:{"text-align":"left"}},[r("strong",[t._v(t._s(t.user.likeCount))]),t._v(" Likes ")])]),r("div",{attrs:{id:"follow-btns"}},[t.isFollowed||t.isCurrentUser?t.isFollowed||t.isCurrentUser?r("router-link",{staticClass:"btn btn-primary ml-2",attrs:{to:"/users/1/edit"}},[t._v("edit profile")]):r("form",{staticStyle:{display:"contents"},attrs:{action:"/following/72?_method=DELETE",method:"POST"},on:{submit:function(e){return e.preventDefault(),e.stopPropagation(),t.unfollow(e)}}},[r("button",{staticClass:"btn btn-danger",attrs:{type:"submit"}},[t._v("取消追蹤")])]):r("button",{staticClass:"btn btn-primary",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),e.stopPropagation(),t.follow(e)}}},[t._v("追蹤")])],1)])])},s=[],a={props:{user:{type:Object,required:!0}},methods:{follow:function(){},unfollow:function(){}}},i=a,o=r("2877"),c=Object(o["a"])(i,n,s,!1,null,null,null);e["a"]=c.exports},"891c":function(t,e,r){},"8dba":function(t,e,r){"use strict";var n=r("891c"),s=r.n(n);s.a},b0c6:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container py-5"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("UserProfileCard",{attrs:{user:t.user}})],1),r("div",{staticClass:"col-md-8"},[r("ReplyTweet",{attrs:{tweet:t.tweet,user:t.user}}),r("Replies",{attrs:{replies:t.replies}}),r("ReplyNew",{on:{"after-create-reply":t.afterCreateReply}})],1)])])},s=[],a=(r("96cf"),r("1da1")),i=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[t._m(0),r("div",{staticClass:"row border border-secondary rounded my-1"},[r("div",{staticClass:"col-3 d-flex align-items-center justify-content-center"},[r("img",{attrs:{src:t.user.avatar}})]),r("div",{staticClass:"col-8 text-left"},[r("h3",[t._v("@"+t._s(t.user.name)+" , "+t._s(t._f("fromNow")(t.tweet.createdAt)))]),r("p",[t._v(t._s(t.tweet.description))]),r("div",{staticClass:"row justify-content-start"},[r("button",{staticClass:"btn btn-light",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.addLike(e)}}},[t._v("Like ")])])])])])},o=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("h3",[t._v("Tweet")])])}],c=r("2708"),l={mixins:[c["a"]],props:{tweet:{type:Object,required:!0},user:{type:Object,required:!0}},methods:{addLike:function(){}}},u=l,f=(r("8dba"),r("2877")),d=Object(f["a"])(u,i,o,!1,null,"3fe78a76",null),p=d.exports,m=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container"},[t._m(0),t._l(t.replies,(function(e){return r("div",{key:e.id,staticClass:"row border border-secondary rounded my-1"},[r("div",{staticClass:"col-3 d-flex align-items-center justify-content-center"},[r("img",{attrs:{src:e.User.avatar}})]),r("div",{staticClass:"col-8 text-left"},[r("h3",[r("router-link",{attrs:{to:{name:"user",params:{id:e.User.id}}}},[t._v("@"+t._s(e.User.name))]),t._v(" , "+t._s(t._f("fromNow")(e.createdAt)))],1),r("p",[t._v(t._s(e.comment))])])])}))],2)},v=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"row"},[r("h3",[t._v("Replies")])])}],w={mixins:[c["a"]],props:{replies:{type:Array,required:!0}}},h=w,b=(r("05df"),Object(f["a"])(h,m,v,!1,null,"13c9f20c",null)),_=b.exports,g=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{staticClass:"container",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[r("div",{staticClass:"row form-group mb-4"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"col form-control",attrs:{rows:"3",name:"reply",placeholder:"What's on your mind?"},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}})]),r("div",{staticClass:"row d-flex justify-content-end"},[r("div",{staticClass:"col-3"},[r("button",{staticClass:"btn btn-link",attrs:{type:"button"},on:{click:function(e){return t.$router.back()}}},[t._v("回上一頁")])]),t._m(0)])])},C=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"col-3"},[r("button",{staticClass:"btn btn-primary mr-0",attrs:{type:"submit"}},[t._v("Reply")])])}],y={props:{},data:function(){return{comment:""}},methods:{handleSubmit:function(){this.$emit("after-create-reply",this.comment),this.comment=""}}},x=y,k=(r("1cd8"),Object(f["a"])(x,g,C,!1,null,"053140ea",null)),R=k.exports,j=r("7950"),E=r("2fa3"),O=function(){return localStorage.getItem("token")},U={getTweet:function(t){return E["b"].get("/tweets/".concat(t),{headers:{Authorization:"Bearer ".concat(O())}})},getReplies:function(t){return E["b"].get("/tweets/".concat(t,"/replies\t"),{headers:{Authorization:"Bearer ".concat(O())}})},reply:{create:function(t,e){return E["b"].post("/tweets/".concat(t,"/replies\t"),{comment:e},{headers:{Authorization:"Bearer ".concat(O())},validateStatus:function(t){return t<500}})}}},P=function(){return localStorage.getItem("token")},S={getFollowers:function(t){return E["b"].get("/users/".concat(t,"/followers"),{headers:{Authorization:"Bearer ".concat(P())}})},getUserProfile:function(t){return E["b"].get("/users/".concat(t),{headers:{Authorization:"Bearer ".concat(P())}})}},$={components:{ReplyTweet:p,Replies:_,ReplyNew:R,UserProfileCard:j["a"]},data:function(){return{tweet:{},replies:[],user:{id:-1,email:"",name:"",avatar:"",introduction:"",role:"user",isCurrentUser:!1,isFollowed:!1,tweetsCount:0,followingCount:0,followerCount:0,likeCount:0}}},created:function(){var t=this.$route.params.tweet_id;this.fetchTweet(t),this.fetchReplies(t)},methods:{fetchTweet:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,U.getTweet(t);case 3:n=r.sent,s=n.data,e.tweet=s.tweet,e.user.id=e.tweet.User.id,e.fetchUserProfile(),r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),E["a"].fire({icon:"error",title:r.t0});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},fetchReplies:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,U.getReplies(t);case 3:n=r.sent,s=n.data,e.replies=s.tweet.Replies,r.next=11;break;case 8:r.prev=8,r.t0=r["catch"](0),E["a"].fire({icon:"error",title:r.t0});case 11:case"end":return r.stop()}}),r,null,[[0,8]])})))()},fetchUserProfile:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.getUserProfile(t.user.id);case 3:r=e.sent,n=r.data,t.user=n.user,console.log(t.user),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),E["a"].fire({icon:"error",title:e.t0});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))()},afterCreateReply:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function r(){var n,s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(r.prev=0,console.log(t),t){r.next=4;break}throw new Error("Reply can not be empty!");case 4:return n=e.$route.params.tweet_id,r.next=7,U.reply.create(n,t);case 7:if(s=r.sent,a=s.data,"success"===a.status){r.next=11;break}throw new Error(a.message);case 11:e.fetchReplies(n),r.next=18;break;case 14:r.prev=14,r.t0=r["catch"](0),console.log(r.t0),E["a"].fire({icon:"error",title:r.t0});case 18:case"end":return r.stop()}}),r,null,[[0,14]])})))()}}},T=$,A=Object(f["a"])(T,n,s,!1,null,null,null);e["default"]=A.exports}}]);
//# sourceMappingURL=chunk-3db158d4.ccf89499.js.map